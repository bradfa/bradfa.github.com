---
layout: post
title: QEMU Booting CLFS PPC Issues
date: 2010-12-01
comments: false
---

<h1>{{ page.title }}</h1>
<div class='post'>
I'm building version <a href="http://cross-lfs.org/files/BOOK/1.1.0/view/ppc/index.html">1.1.0 of the Cross Linux From Scratch (CLFS) PowerPC</a> system.&nbsp; I don't actually have any PowerPC hardware so I'm using <a href="http://wiki.qemu.org/Main_Page">QEMU</a>.&nbsp; I have built QEMU 0.13.0 from source because Debian Lenny only comes with version 0.9.1 and it's a bit old.<br /><br />When booting my CLFS system in QEMU, this is my command line:<br /><blockquote>andrew@bigbox:~$ qemu-system-ppc -nographic \<br />-hda cross-lfs-ppc/disk.img -kernel \<br />cross-lfs-ppc/clfs-fs/boot/clfskernel-2.6.24.7 -M g3beige</blockquote>The switches used are:<br />-nographic -&gt; QEMU should output to my terminal rather than VNC<br />-hda -&gt; This is the file to use as disk /dev/hda<br />-kernel -&gt; The kernel to use<br />-M g3beige -&gt; QEMU should emulate a beige G3 PowerMac<br /><br />When I was building my CLFS system, I didn't follow the directions for Yaboot because I was under the impression that I could simply hand QEMU the kernel and root file system and it would be happy.&nbsp; When creating my disk image, I didn't create any partitions, everything's simply in hda.&nbsp; One of these two spots are probably the root of my problem.&nbsp; I'm going to try building Yaboot first and if that doesn't fix it, I'll work on creating the partitions correctly within my disk image file.<br /><br />When booting, QEMU goes through its normal bios output but after finding a display and building the device tree, it hangs with:<br /><blockquote>Calling quiesce ...<br />returning from prom_init</blockquote>After a few minutes, it will reboot and end up at the same place.&nbsp; The verbosity is not much help for debugging and Google doesn't seem to be my friend with this issue.<br /><br />I'll be sure to either comment on this post as to my resolution or I'll write another post detailing the fix.</div>
<h2>Comments</h2>
<div class='comments'>
</div>
